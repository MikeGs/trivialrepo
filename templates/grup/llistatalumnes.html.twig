{% extends 'base.html.twig' %}

{% block title %}{{ title }}{% endblock %}

{% block body %}

<div class="m-5">

    <div class="card-header border-bottom bg-white d-flex justify-content-between p-0">
        <h1 class="h3">{{grup.nom}} - Llistat d'alumnes</h1>
    </div>

    <div class="alumnes">

    <a href='#' class="btn btn-success float-right afegirbtn" id="afegirAlumneBtn"><i class="fas fa-plus link-white mr-2"></i>Afegir alumne</a>

    <div class="llegenda-taula">
    
        <div class="float-right">
            <p class="float-left mr-3">Llegenda: </p>

            <div class="link-blue float-left mr-2">

                <i class="fas fa-eye"></i>
                <label>Detalls</label>

            </div>

            <div class="link-red float-left">

                <i class="fas fa-times"></i>
                <label>Desvincular</label>

            </div>
        </div>

    </div>

    <table class="table custom-table" id="llistatAlumnes">
    <thead>
        <tr>
        <th scope="col">Nom de l'alumne</th>
        <th scope="col">Partides jugades</th>
        <th scope="col">Partides guanyades</th>
        <th scope="col">Entrenaments finalitzats</th>
        <th scope="col">Última activitat</th>
        <th scope="col">Accions</th>  
        </tr>
    </thead>
    <tbody>
    {% for alumne in alumnes %}

        {% for alumneDetailed in alumnesDetailed  %}

            {% if alumne.usuari_id == alumneDetailed.id and alumne.grup_id == grup.id %}

            <tr>
            <td scope="col">{{ alumneDetailed.nom }}</td>
            <td scope="col">Jugades</td>
            <td scope="col">Guanyades</td>
            <td scope="col">Entrenaments F</td>
            <td scope="col">{{ alumneDetailed.lastLogin|date('d-m-Y | h:m') }}</td>
            <td scope="col">
                <a href="#"><i class="fas fa-eye link-blue mr-2"></i></a>
                <a href="#"><i class="fas fa-times link-red"></i></a>
            </td>
            </tr>

            {% endif %}

        {% endfor %}

    {% endfor %}    
    </tbody>
    </table>

    </div>
</div>

<div id="afegirUsuariModal" class="modal fade" tabindex="-1" role="dialog">
	<div class="modal-dialog" role="document">
		<div class="modal-content">
			<div class="modal-header">
				<h6 class="modal-title" id="afegirUsuariModal"></h6>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
					<span aria-hidden="true">&times;</span>
				</button>
			</div>
			<div class="modal-body">
				<div id="afegirUsuariModalMsg">
					<div class="form-group">
						<table>

                            <tr>
                                <th scope="col">Nom</th>
                            </tr>
                            
                            {% for alumneDetailed in alumnesDetailed %}
                                <tr>
                                    <td><a class="elementLlista" href="#">{{alumneDetailed.nom}}</a></td>
                                </tr>
                            {% endfor %}

                        </table>
					</div>
				</div>
			</div>
			<div class="modal-footer" id="afegirUsuariModalBtns">
			</div>
		</div>
	</div>
</div>

{% endblock %}
{% block javascriptsBottom %}

    {{ parent() }}

    <script>
		$(document).ready( function () {

            llistatGrups = $('#llistatAlumnes').dataTable( {
	            "language": {
	                "url": "https://cdn.datatables.net/plug-ins/1.10.19/i18n/Catalan.json"
	            }
	        });

            $('body').on( 'click', '#afegirAlumneBtn', function() {
		    	//$('#assignarRolModalBtns').html(`<button class="cancelBtn btn btn-secondary mr-2">Cancel·lar</button><button data-id="${id}" id="rolAssignatBtn" class="btn btn-primary disabled">Continuar</button>`);
		    	$('#afegirUsuariModal').modal('show');

		    	$('body').on('click', '#afegirAlumneBtn', function() {
		    		$.get()
		    	});
		    });

        });

</script>
{% endblock %}