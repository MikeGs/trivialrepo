<html>
    <head>
        <meta charset="UTF-8">

        <title>{{title}}</title>

        {% block stylesheets %}
            <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">
            <link rel="stylesheet" href="{{ asset('bootstrap4/css/bootstrap.min.css') }}"/>  
            <link rel="stylesheet" href="{{ asset('fontAwesome/css/all.css') }}">      
            <link rel="stylesheet" type="text/css" href="{{ asset('Datatables/datatables.min.css') }}"/>
            <link rel="stylesheet" href="{{ asset('css/style.css') }}"/>
        {% endblock %}
        {% block javascriptsTop %}
        <script src="{{ asset('js/jquery.js') }}"></script>
        <script src="{{ asset('bootstrap4/js/bootstrap.min.js') }}"></script>
        <script src="{{ asset('js/popper.js') }}"></script> 
        <script type="text/javascript" src="{{ asset('Datatables/datatables.min.js') }}"></script>     

        <script src="{{ asset('js/rollups/aes.js') }}"></script>
        <script src="{{ asset('js/components/aes.js') }}"></script>

        <script src="{{ asset('js/rollups/pbkdf2.js') }}"></script>
        <script src="{{ asset('js/components/pbkdf2.js') }}"></script>

        <script src="{{ asset('js/damnhx.js') }}"></script>

        {% endblock %}
    </head>

<body class="container row col col-12 m-0 p-0">

    <div id='usuariFloat' class="alltransition3">
        <div id='usuariFloatInt'>

            <div id='perfilNom'>
                <label>{{app.user.nom}}</label>
            </div>

            <div id='perfilFloat' class='alltransition3'>
                <label class="alltransition3">{{app.user.nom|slice(0, 1)}}</label>
            </div>
        </div>
    </div>

    <div id="startMenu">

        <h1 class="p-3">Trivial</h1>

        <ul id="startMenuUl" class="list-group alltransitionparent3">
            <li>
            <a id="partidaBtn" class="buttonStart list-group-item" href="#">Partida</a>
            <ul id="llistatGrupsJoc">
                {% for grup in app.user.grups %}
                <li><a id='{{ grup.id }}' class="buttonStart partidaBtnGrup list-group-item" href='#'> - {{ grup.nom }}</a></li>
                {% endfor %}
            </ul>
            </li>
            <li><a id="entrenamentBtn" class="buttonStart list-group-item" href="#">Entrenament</a></li>
            <li><a id="rankingBtn" class="buttonStart list-group-item" href="#">RÃ nquing</a></li>
            <li><a id="perfilBtn" class="buttonStart list-group-item" href="{{ path('fos_user_profile_edit') }}">Perfil</a></li>
            <li><a id="sortirElement" class="buttonStart list-group-item" href="{{ path('fos_user_security_logout') }}">Sortir</a></li>
        </ul>

        <div id="diagonalColorStart"></div>
    </div>

    <div id="contingutStart" class="scroll">
        {% block body %}{% endblock %}
    </div>

    <div class="backgroundRotate">
        <img src="{{asset('img/bgrotate.png')}}"/>
    </div>

    <script>

    $(document).ready(function() {
        if (readCookie('ferEntreno') == "redirect") {
            $("#entrenamentBtn").click();     
        }
        delete_cookie('ferEntreno');
    });

    var arrayButtons = $(".buttonStart");

    function asActive(element) {

        $.each( arrayButtons, function( key, value ) {
            $("#"+value.id).removeClass("active");
        });

        $(element).addClass("active");

    }

    var contingut = $("#contingutStart");

    $(".partidaBtnGrup").click(function() {

        writeCookie('ferEntreno',"noredirect",1);

        var grup = this.id;
        var url = "{{ path('getPartidaPortait') }}";
        var codes;

        $.post(url, { 'grup': grup}) 
		    .done(function(response) {
                $("#contingutStart").html(response);
			});
        
        asActive(".partidaBtnGrup#" + grup);

    });

    $("#entrenamentBtn").click(function() {

        if (readCookie('ferEntreno') != "redirect") {
            writeCookie('ferEntreno',"redirect",1);
            location.reload();
        }

        delete_cookie('ferEntreno');

        asActive("#entrenamentBtn");
        clearHTML();
        var url = "{{ path('getEntrenamentPortait') }}";
        $.post(url) 
		    .done(function(response) {
                $("#contingutStart").html(response);
			});

    });

    </script>

</body>